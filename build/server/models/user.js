// Generated by CoffeeScript 1.11.1
var User, americano, fixOnboardedSteps;

americano = require('cozydb');

fixOnboardedSteps = function(user) {
  user.onboardedSteps = user.onboardedSteps || [];
  if (Array.isArray(user.onboardedSteps[0])) {
    user.onboardedSteps = user.onboardedSteps[0];
  }
  return user;
};

module.exports = User = americano.getModel('User', {
  onboardedSteps: Array
});

User.first = function(callback) {
  return User.request('all', function(err, users) {
    var user;
    if (err) {
      return callback(err);
    } else if (!users || users.length === 0) {
      return callback(null, void 0);
    } else {
      user = fixOnboardedSteps(users[0]);
      return callback(null, user);
    }
  });
};
